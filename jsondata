(function(){
    const results = [];

    // Fetch and process JSON-LD scripts
    var scripts = document.querySelectorAll('script[type="application/ld+json"]');
    for (var i = 0; i < scripts.length; i++) {
        try {
            let jsonLd = JSON.parse(scripts[i].textContent);
            results.push(JSON.stringify(jsonLd, null, 2));
        } catch (e) {
            console.log("Invalid JSON-LD", e);
        }
    }

    // Write results to the document after 3 seconds
    function writeResults() {
        results.forEach(function(jsonLd) {
            document.write("<pre>" + jsonLd + "</pre><br>");
        });
    }

    setTimeout(writeResults, 3000);
})();
